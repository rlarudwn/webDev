<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.mapper.member-mapper">
 <select id="memberIdCountData" resultType="int" parameterType="string">
  SELECT COUNT(*) FROM project_member
  WHERE id=#{id}
 </select>
 <select id="memberInfoData" resultType="MemberVO" parameterType="string">
   SELECT * FROM project_member
   WHERE id=#{id}
 </select>
 <insert id="memberInsert" parameterType="MemberVO">
 INSERT INTO project_member VALUES(#{id}, #{pwd}, #{name}, #{sex}, #{birthday}, #{post},
 #{addr1}, #{addr2}, #{phone}, #{email}, #{content}, sysdate, 'n')
 </insert>
 <select id="memberUpdateData" resultType="MemberVO" parameterType="String">
 SELECT id, name, sex, birthday, post, addr1, addr2, phone, email, content
 FROM project_member
 WHERE id=#{id}
 </select>
 <update id="memberUpdate" parameterType="MemberVO">
 UPDATE project_member SET
 name=#{name}, birthday=#{birthday}, post=#{post}, arrd1=#{addr1}, adrr2=${addr2}, content=#{content}, sex=#{sex}, email=#{email}, phone=#{phone}
 WHERE id=#{id}
 </update>
 <select id="memberIdFindEmailCount" resultType="int" parameterType="MemberVO">
SELECT COUNT(*) FROM project_member
WHERE name=#{name} AND email=#{email}
 </select>
 <select id="memberIdFindPhoneCount" resultType="int" parameterType="MemberVO">
SELECT COUNT(*) FROM project_member
WHERE name=#{name} AND phone=#{phone}
 </select>
 <select id="memberIdFindEmailData" resultType="String" parameterType="MemberVO">
SELECT RPAD(SUBSTR(id, 1, 2), LENGTH(id), '*') FROM project_member
WHERE name=#{name} AND email=#{email}
 </select>
 <select id="memberIdFindPhoneData" resultType="String" parameterType="MemberVO">
SELECT RPAD(SUBSTR(id, 1, 2), LENGTH(id), '*') FROM project_member
WHERE name=#{name} AND phone=#{phone}
 </select>
</mapper>